# teamcity-k8s-agent

TeamCity Project and Kubernetes Cloud Profile Initializer

Main goal is to automatic register kubernetes cluster with specific project on teamcity server
Then teamcity will have access to run agent in given namespace.

Other agent provision methods requires manual input like Web UI to authorize agent to join CI.

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| podTemplates[0].name | string | `"my-template-1"` |  |
| podTemplates[0].template.spec.containers[0].image | string | `"jetbrains/teamcity-agent"` |  |
| podTemplates[0].template.spec.containers[0].name | string | `"template-container"` |  |
| podTemplates[0].template.spec.containers[0].resources.limits.ephemeral-storage | string | `"25Gi"` |  |
| podTemplates[0].template.spec.containers[0].resources.limits.memory | string | `"2Gi"` |  |
| podTemplates[0].template.spec.containers[0].resources.requests.ephemeral-storage | string | `"25Gi"` |  |
| rbac.roleName | string | `"teamcity-executor"` |  |
| rbac.subjectKind | string | `"ServiceAccount"` |  |
| rbac.subjectName | string | `"teamcity-k8s-sa"` |  |
| rbac.subjectNamespace | string | `"teamcity-agents"` |  |
| teamcity.projects[0].id | string | `"projectA"` |  |
| teamcity.projects[0].k8sProfile.apiServerUrl | string | `"https://kubernetes.default.svc"` |  |
| teamcity.projects[0].k8sProfile.buildsLimit | int | `2` |  |
| teamcity.projects[0].k8sProfile.containerParameters.params1 | string | `"value1"` |  |
| teamcity.projects[0].k8sProfile.containerParameters.params2 | string | `"value2"` |  |
| teamcity.projects[0].k8sProfile.name | string | `"K8s Profile A"` |  |
| teamcity.projects[0].k8sProfile.namespace | string | `"teamcity-agents"` |  |
| teamcity.projects[0].k8sProfile.templateName | string | `"my-template-1"` |  |
| teamcity.projects[0].name | string | `"Project A"` |  |
| teamcity.serverUrl | string | `"http://ci-teamcity-main.teamcity-cluster.svc.cluster.local:8111"` |  |

----------------------------------------------
Autogenerated from chart metadata using [helm-docs v1.14.2](https://github.com/norwoodj/helm-docs/releases/v1.14.2)
